@if (isMobileViewSignal()) {
<app-navbar-mobile />
}
@else {
<mat-toolbar color="primary" class="main-toolbar" role="navigation" aria-label="Primary navigation">
  <mat-toolbar-row class="toolbar-row">
    <section class="toolbar-left">
      <a class="brand" routerLink="/" aria-label="Home">
        <h3>WBT</h3>
        <mat-icon aria-hidden="true" class="rotating-icon">sports_basketball</mat-icon>
      </a>

      @if (loggedInUserSig && loggedInUserSig()) {
      <nav mat-tab-nav-bar aria-label="Primary navigation links">
        @if (loggedInUserSig()?.roles?.includes('admin')) {
        @for (link of linksWithAdmin; track $index) {
        <a mat-tab-link [routerLink]="['/' + link]" routerLinkActive #rla="routerLinkActive" [active]="rla.isActive">
          {{ link | titlecase }}
        </a>
        }
        }
        @else if (loggedInUserSig()?.roles?.includes('coach')) {
        @for (link of linksWithCoach; track $index) {
        <a mat-tab-link [routerLink]="['/' + link]" routerLinkActive #rla="routerLinkActive" [active]="rla.isActive">
          {{ link | titlecase }}
        </a>
        }
        }
        @else {
        @for (link of links; track $index) {
        <a mat-tab-link [routerLink]="['/' + link]" routerLinkActive #rla="routerLinkActive" [active]="rla.isActive">
          {{ link | titlecase }}
        </a>
        }
        }
      </nav>
      }
    </section>

    <section class="toolbar-right" aria-label="User actions">
      <div class="about-buttons">
        <button mat-flat-button color="accent">About App</button>
        <button mat-flat-button color="accent">About Us</button>
      </div>

      @if (loggedInUserSig && loggedInUserSig(); as user) {
      <button [mat-menu-trigger-for]="appMenu" mat-mini-fab aria-label="User menu" class="user-menu-btn">
        @if (user.profilePhotoUrl) {
        <img class="user-avatar" src="{{apiUrl + user.profilePhotoUrl}}" alt="{{user.userName}}'s profile photo" />
        }
        @else {
        <span class="user-initial">{{ user.userName[0] | titlecase }}</span>
        }
      </button>
      }

      <mat-menu #appMenu="matMenu" class="user-menu">
        @if (loggedInUserSig && loggedInUserSig(); as user) {
        <div class="user-info">
          @if (user.profilePhotoUrl) {
          <img class="user-avatar-large" src="{{apiUrl + user.profilePhotoUrl}}"
            alt="{{user.userName}}'s profile photo" />
          }
          @else {
          <span class="user-initial-large">{{ user.userName[0] | titlecase }}</span>
          }
          <p class="username">{{ user.userName }}</p>
        </div>
        }
        <mat-divider></mat-divider>
        <mat-nav-list>
          <a mat-list-item routerLink="user/user-edit" routerLinkActive="active-link">
            <mat-icon color="primary">edit_note</mat-icon>
            Edit Profile
          </a>
          <a mat-list-item routerLink="members" routerLinkActive="active-link">
            <mat-icon color="primary">people</mat-icon>
            All Members
          </a>
          <a mat-list-item routerLink="messages" routerLinkActive="active-link">
            <mat-icon color="primary">forum</mat-icon>
            Messages
          </a>
          <a mat-list-item routerLink="likes" routerLinkActive="active-link">
            <mat-icon color="warn">favorite</mat-icon>
            Likes
          </a>
        </mat-nav-list>
        <mat-divider></mat-divider>
        <div class="logout-btn-container">
          <button (click)="logout()" mat-raised-button color="warn" aria-label="Logout">Logout</button>
        </div>
      </mat-menu>
    </section>
  </mat-toolbar-row>
</mat-toolbar>
}