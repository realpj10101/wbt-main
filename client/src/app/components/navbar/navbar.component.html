<mat-toolbar>
    <section class="left">

        <!-- <div class="right"> -->
        <!--  -->
        <!-- </div> -->

        <div class="left-side">
            <a class="brand" routerLink="/">
                <h3>WBT</h3>
                <mat-icon>sports_basketball</mat-icon>
            </a>
        </div>
        <!-- navlinks -->
        @if (loggedInUserSig && loggedInUserSig()) {
        <nav mat-tab-nav-bar [backgroundColor]="'primary'" [color]="'accent'" [tabPanel]="tabPanel">

            @if (loggedInUserSig()?.roles?.includes('admin')) {
            @for (link of linksWithAdmin; track $index) {
            <a mat-tab-link [routerLink]="['/' + link]" routerLinkActive #rla="routerLinkActive"
                [active]="rla.isActive">
                {{ link | titlecase}}
            </a>
            }
            }
            @else {
            @for (link of links; track $index) {
            <a mat-tab-link [routerLink]="['/' + link]" routerLinkActive #rla="routerLinkActive"
                [active]="rla.isActive">
                {{ link | titlecase}}
            </a>
            }
            }
        </nav>
        }
        <mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>
    </section>
    <section class="right">
        <!-- if logged-in: show appMenu
            else: show signup/login -->
        @if (loggedInUserSig && loggedInUserSig(); as user) {
        <button [mat-menu-trigger-for]="appMenu" class="menu-button" mat-mini-fab>
          <!-- <span>{{user.knownAs[0] | titlecase}}</span> Use span to not have padding/margin -->
          @if (user.profilePhotoUrl) {
          <img class="top-avatar" mat-card-avatar src="{{apiUrl + user.profilePhotoUrl}}" fill priority
            alt="{{user.userName[0]}}">
          <!-- // localhost:5000/storage/photo/sldkfjlsj92374.web -->
          } @else {
          <p>{{ user.userName[0] | titlecase }}</p>
          }
        </button>
        } @else {
          
        }
    
        <mat-menu #appMenu [class]="'mat-menu'">
          <!-- profile -->
          @if (loggedInUserSig && loggedInUserSig(); as user) {
          <div class="user-info">
            <div class="profile-image">
              @if (user.profilePhotoUrl) {
              <img class="top-avatar" mat-card-avatar src="{{apiUrl + user.profilePhotoUrl}}" fill priority
                alt="{{user.userName[0]}}">
              <!-- // localhost:5000/storage/photo/sldkfjlsj92374.web -->
              } @else {
              <p>{{ user.userName[0] | titlecase }}</p>
              }
              <!-- <p>
                  {{ user.knownAs[0] | titlecase }}
                </p> -->
            </div>
            <div>
              <p>{{ user.userName }}</p>
              <p class="userName">{{ user.userName }}</p>
            </div>
          </div>
          }
          <!-- navigation -->
          <mat-divider></mat-divider>
          <mat-list>
            <mat-list-item [routerLink]="['user/user-edit']" routerLinkActive="router-link-active">
              <div class="menu-items">
                <mat-icon>edit_note</mat-icon>
                Edit Profile
              </div>
            </mat-list-item>
            <mat-list-item [routerLink]="['members']" routerLinkActive="router-link-active">
              <div class="menu-items">
                <mat-icon>flaky</mat-icon>
                All Members
              </div>
            </mat-list-item>
            <mat-list-item [routerLink]="['messages']" routerLinkActive="router-link-active">
              <div class="menu-items">
                <mat-icon>assignment_returned</mat-icon>
                Messages
              </div>
            </mat-list-item>
          </mat-list>
    
          <mat-divider></mat-divider>
          <div class="logout">
            <button (click)="logout()" mat-raised-button color="warn">Logout</button>
          </div>
        </mat-menu>
      </section>
</mat-toolbar>